(this.webpackJsonpdessert=this.webpackJsonpdessert||[]).push([[0],{249:function(e,t,c){},250:function(e,t,c){},252:function(e,t,c){},257:function(e,t,c){},258:function(e,t,c){},259:function(e,t,c){},261:function(e,t,c){},265:function(e,t,c){},266:function(e,t,c){},267:function(e,t,c){},269:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(41),i=c.n(r),o=(c(249),c(250),c.p+"static/media/postre.77394cb9.png"),s=c(2);var l=function(){return Object(s.jsx)("img",{src:o,height:"40px",width:"40px",className:"widget"})},j=c(34),d=(c(252),c(19)),u=c(129),b=c(17),h=Object(n.createContext)(),x=function(e){var t=e.children,c=Object(n.useState)([]),a=Object(b.a)(c,2),r=a[0],i=a[1],o=Object(n.useState)(0),l=Object(b.a)(o,2),j=l[0],x=l[1],O=Object(n.useState)(0),m=Object(b.a)(O,2),p=m[0],f=m[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("cart");e?i(JSON.parse(e)):localStorage.setItem("cart",JSON.stringify([]))}),[]),Object(n.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(r)),f(r.reduce((function(e,t){return t.quantity+e}),0)),x(r.reduce((function(e,t){return t.price*t.quantity+e}),0))}),[r]),Object(s.jsx)(h.Provider,{value:{carrito:r,setCarrito:i,addItem:function(e,t){if(n=e._id,r.some((function(e){return e._id===n}))){var c=r.map((function(c){return c._id===e._id?Object(u.a)(Object(u.a)({},c),{},{quantity:c.quantity+t}):c}));i(c)}else i([].concat(Object(d.a)(r),[Object(u.a)(Object(u.a)({},e),{},{quantity:t})]));var n},cant:p,getStock:function(e){var t=r.find((function(t){return t._id===e._id}));return t?e.stock-t.quantity:e.stock},total:j,removeItem:function(e){i(r.filter((function(t){return t._id!==e._id})))},clear:function(){i([])}},children:t})},O=c(338),m=c(339),p=c(342),f=c(341),v=c(327),g=c(209),y=c.n(g),k=c(340);var C=function(){var e=Object(n.useContext)(h).cant;return Object(s.jsx)(O.a,{sx:{background:"#e91e63"},children:Object(s.jsxs)(m.a,{children:[Object(s.jsx)(k.a,{sx:{flexGrow:1},children:Object(s.jsx)(j.b,{to:"/",style:{textDecoration:"none",color:"white"},children:Object(s.jsxs)(k.a,{sx:{display:"flex",alignItems:"center"},children:[Object(s.jsx)(f.a,{color:"inherit",edge:"start",size:"large",children:Object(s.jsx)(l,{})}),Object(s.jsx)(p.a,{variant:"h5",children:Object(s.jsx)("div",{className:"main-title",children:"Dessert Now!"})})]})})}),e>0&&Object(s.jsx)(j.b,{to:"/cart",children:Object(s.jsx)(f.a,{sx:{color:"white"},size:"large",children:Object(s.jsx)(v.a,{badgeContent:e,color:"primary",children:Object(s.jsx)(y.a,{})})})})]})})},S=c(345),N=c(349),w=c(346),_=c(350),q=c(343),T=c(337),E=c(351),I=c(210),B=c.n(I),z=c(211),D=c.n(z),A=c(212),F=c.n(A),J=c(332),P=c(329),$=c(213),R=c.n($);var H=function(e){var t=e.item,c=Object(n.useContext)(h),a=c.addItem,r=c.getStock,i=Object(n.useState)(1),o=Object(b.a)(i,2),l=o[0],d=o[1],u=Object(n.useState)(!1),x=Object(b.a)(u,2),O=x[0],m=x[1],v=function(e,t){"clickaway"!==t&&m(!1)};return Object(s.jsxs)(S.a,{sm:{width:"345"},children:[Object(s.jsx)(w.a,{component:"img",height:"140",image:t.img,alt:"imagen_de_".concat(t.name)}),Object(s.jsx)(f.a,{disabled:!r(t),onClick:function(){a(t,l),m(!0)},"aria-label":"add to shopping cart",style:{background:"#e91e63",color:"white",position:"relative",bottom:"15px",left:"10px"},children:Object(s.jsx)(B.a,{})}),Object(s.jsxs)(N.a,{children:[Object(s.jsx)(p.a,{gutterBottom:!0,variant:"h5",component:"div",children:t.name}),Object(s.jsx)(p.a,{variant:"body1",children:"Precio: $".concat(t.price," ARS")}),r(t)?Object(s.jsxs)(k.a,{sx:{display:"flex",alignItems:"center",mt:2},children:[Object(s.jsxs)(_.a,{children:[Object(s.jsx)(q.a,{color:"secondary",onClick:function(){l!==r(t)&&d(l+1)},sx:{borderColor:"#e91e63"},children:Object(s.jsx)(D.a,{sx:{color:"#e91e63"}})}),Object(s.jsx)(q.a,{color:"secondary",onClick:function(){l>1&&d(l-1)},sx:{borderColor:"#e91e63"},children:Object(s.jsx)(F.a,{sx:{color:"#e91e63"}})})]}),Object(s.jsx)("b",{className:"ml-3",children:l})]}):Object(s.jsx)(T.a,{label:"Sin stock",color:"secondary",size:"medium",className:"mt-2",variant:"outlined"})]}),Object(s.jsx)(E.a,{children:Object(s.jsx)(j.b,{to:"/item/".concat(t._id),style:{textDecoration:"none"},children:Object(s.jsx)(q.a,{size:"small",variant:"contained",style:{background:"#e91e63"},children:"Ver mas"})})}),Object(s.jsx)(J.a,{open:O,autoHideDuration:5e3,onClose:v,children:Object(s.jsx)(P.a,{onClose:v,sx:{width:"100%",background:"#e91e63",color:"white"},icon:Object(s.jsx)(R.a,{sx:{color:"white"}}),children:"En su carrito!"})})]})},U=c(335);function V(e){var t=e.items;return Object(s.jsx)(U.a,{container:!0,spacing:4,children:t.map((function(e){return Object(s.jsx)(U.a,{item:!0,xs:12,sm:6,md:4,lg:4,children:Object(s.jsx)(H,{item:e},e.id)},e._id)}))})}c(257);var Z=c(344),G=c(323),L=c(115);c(258);var M=function(){return Object(s.jsxs)(G.a,{fluid:!0,className:"text-center container-footer",children:[Object(s.jsx)("h5",{className:"footer-title",children:"S\xedguenos en nuestras redes"}),Object(s.jsx)(L.a,{name:"facebook official",className:"icon-footer"}),Object(s.jsx)(L.a,{name:"instagram",className:"icon-footer"}),Object(s.jsx)(L.a,{name:"twitter",className:"icon-footer"})]})},W=c(347),K=c(325),Q=c(330),X=c(215),Y=c.n(X);c(259);var ee=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(null),i=Object(b.a)(r,2),o=i[0],l=i[1],d=function(){l(null)};return Object(n.useEffect)((function(){fetch("https://api-dessert-now.herokuapp.com/api/categories").then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}),[]),Object(s.jsxs)(W.a,{className:"mb-2 pl-0",children:[Object(s.jsx)(q.a,{variant:"outlined",sx:[{borderColor:"#e91e63",color:"#e91e63"},{":hover":{borderColor:"#e91e63",color:"#e91e63"}}],endIcon:Object(s.jsx)(Y.a,{}),onClick:function(e){l(e.currentTarget)},children:Object(s.jsx)("div",{className:"category-title",children:"Categorias"})}),Object(s.jsx)(K.a,{id:"menu-category",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:d,children:c.map((function(e){return Object(s.jsx)(Q.a,{onClick:d,children:Object(s.jsx)(j.c,{to:"/category/".concat(e.name),style:{textDecoration:"none",color:"black"},children:e.name})},e._id)}))})]})};var te=function(e){var t=e.match.params.id,c=Object(n.useState)([]),a=Object(b.a)(c,2),r=a[0],i=a[1],o=Object(n.useState)(!0),l=Object(b.a)(o,2),j=l[0],d=l[1];return Object(n.useEffect)((function(){fetch("https://api-dessert-now.herokuapp.com/api/products").then((function(e){return e.json()})).then((function(e){if(t){var c=e.filter((function(e){return e.category==t}));i(c)}else i(e);d(!1)})).catch((function(e){return console.log(e)}))}),[t]),Object(s.jsxs)("div",{children:[Object(s.jsxs)(G.a,{style:{marginTop:"5rem"},children:[Object(s.jsx)("h1",{className:"titulo-principal",children:"Bienvenidos a Dessert NOW!"}),j?Object(s.jsx)(Z.a,{color:"secondary",style:{marginLeft:"50%",marginTop:"10%",color:"#e91e63"}}):Object(s.jsxs)("div",{children:[Object(s.jsx)(ee,{}),Object(s.jsx)(V,{items:r,category:t})]})]}),!j&&Object(s.jsx)(M,{})]})},ce=c(326),ne=(c(261),c(216)),ae=c.n(ne);var re=function(e){var t=e.item,c=Object(n.useContext)(h).removeItem;return Object(s.jsxs)(ce.a,{children:[Object(s.jsx)(ce.a.Image,{size:"medium",src:t.img}),Object(s.jsxs)(ce.a.Content,{children:[Object(s.jsx)(ce.a.Header,{children:t.name}),Object(s.jsxs)(ce.a.Description,{children:[Object(s.jsx)("p",{children:"Precio $".concat(t.price)}),Object(s.jsx)("p",{children:"Cantidad: ".concat(t.quantity)}),Object(s.jsx)("p",{children:"Subtotal: $".concat(t.quantity*t.price)})]}),Object(s.jsx)(ce.a.Extra,{})]}),Object(s.jsxs)(f.a,{onClick:function(){c(t)},children:["Eliminar",Object(s.jsx)(ae.a,{})]})]})};var ie=function(){var e=Object(n.useContext)(h),t=e.carrito,c=e.total;return Object(s.jsxs)(G.a,{style:{marginTop:"5rem"},children:[Object(s.jsx)("h1",{className:"title-cart",children:"Carrito de compras"}),Object(s.jsx)(ce.a.Group,{divided:!0,children:t.length>0?t.map((function(e){return Object(s.jsx)(re,{item:e},e._id)})):Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsx)("h2",{className:"alert-cart",children:"Usted no tiene productos"}),Object(s.jsx)(j.b,{to:"/",style:{textDecoration:"none"},children:Object(s.jsx)(q.a,{variant:"contained",style:{background:"#e91e63",color:"white"},children:"Volver al menu"})})]})}),t.length>0&&Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{className:"total-title",children:"Total del carrito: $".concat(c)}),Object(s.jsx)(j.b,{to:"/form",children:Object(s.jsx)(q.a,{variant:"contained",style:{color:"white",background:"#e91e63"},children:"Finalizar compra"})})]})]})},oe=c(130),se=c.n(oe),le=c(189),je=c(324),de=c(333),ue=c(331),be=(c(265),c(220)),he=c(21);var xe=function(){var e=Object(n.useContext)(h),t=e.carrito,c=e.total,a=e.clear,r=Object(he.f)(),i=Object(be.a)({initialValues:{name:"",phone:"",email:""},validate:function(e){var t={};return e.name?(e.name.length>15||e.name.length<3)&&(t.name="El nombre debe tener como maximo 15 caracteres, minimo 3..."):t.name="Requerido",e.phone?/^(?:(?:00)?549?)?0?(?:11|[2368]\d)(?:(?=\d{0,2}15)\d{2})??\d{8}$/.test(e.phone)||(t.phone="Formato de telefono no valido"):t.phone="Requerido",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Formato de email invalido"):t.email="Requerido",t},onSubmit:function(e){var n={buyer:e,items:t.map((function(e){return x(e),{_id:e._id,title:e.name,price:e.price,quantity:e.quantity}})),date:"Una fecha",total:c};u(n),i.resetForm()}}),o=Object(n.useState)(!1),l=Object(b.a)(o,2),j=l[0],d=l[1],u=function(){var e=Object(le.a)(se.a.mark((function e(t){var c,n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api-dessert-now.herokuapp.com/api/create-order",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return c=e.sent,e.next=6,c.text();case 6:n=e.sent,console.log(n),a(),d(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(le.a)(se.a.mark((function e(t){var c,n,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={stock:t.stock-t.quantity},e.next=4,fetch("https://api-dessert-now.herokuapp.com/api/update-stock/".concat(t._id),{method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.text();case 7:a=e.sent,console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)(G.a,{className:"conteiner-form",children:j?Object(s.jsx)(ue.a,{positive:!0,children:Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsx)(ue.a.Header,{children:"Orden registrada con exito!"}),Object(s.jsx)("p",{children:"Recibira una notificacion cuando este lista!"}),Object(s.jsx)("div",{children:Object(s.jsx)(L.a,{size:"large",name:"truck"})}),void setTimeout((function(){r.push("/")}),6500)]})}):Object(s.jsxs)(je.a,{className:"form",onSubmit:i.handleSubmit,children:[Object(s.jsx)("h1",{className:"order-title",children:"Orden de Pedido"}),Object(s.jsxs)(je.a.Field,{children:[Object(s.jsx)("label",{children:"Nombre"}),Object(s.jsx)("input",{name:"name",value:i.values.name,onChange:i.handleChange,onBlur:i.handleBlur,placeholder:"Nombre"}),i.touched.name&&i.errors.name?Object(s.jsx)("div",{style:{color:"red"},children:i.errors.name}):null]}),Object(s.jsxs)(je.a.Field,{children:[Object(s.jsx)("label",{type:!0,children:"Telefono"}),Object(s.jsx)("input",{name:"phone",value:i.values.phone,onChange:i.handleChange,onBlur:i.handleBlur,placeholder:"N\xfamero"}),i.touched.phone&&i.errors.phone?Object(s.jsx)("div",{style:{color:"red"},children:i.errors.phone}):null]}),Object(s.jsxs)(je.a.Field,{children:[Object(s.jsx)("label",{children:"Email"}),Object(s.jsx)("input",{name:"email",value:i.values.email,onChange:i.handleChange,onBlur:i.handleBlur,placeholder:"juan@example.com"}),i.touched.email&&i.errors.email?Object(s.jsx)("div",{style:{color:"red"},children:i.errors.email}):null]}),Object(s.jsx)(de.a,{type:"submit",secondary:!0,children:"Enviar Orden"})]})})},Oe=(c(266),c(267),c(218)),me=c.n(Oe),pe=c(219),fe=c.n(pe);var ve=function(e){var t=e.stock,c=e.initial,a=e.onAdd,r=Object(n.useState)(c),i=Object(b.a)(r,2),o=i[0],l=i[1];return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"container-count",children:[Object(s.jsxs)("h4",{children:["Cantidad: ",o]}),Object(s.jsxs)("div",{children:[Object(s.jsx)(f.a,{onClick:function(){o!==t&&l(o+1)},children:Object(s.jsx)(me.a,{style:{color:"#e91e63",fontSize:"2.1rem"}})}),Object(s.jsx)(f.a,{onClick:function(){o!==c&&l(o-1)},className:"pl-0",children:Object(s.jsx)(fe.a,{style:{color:"#e91e63",fontSize:"2.1rem"}})})]})]}),Object(s.jsx)(q.a,{onClick:function(){a(o)},className:"agregar-carrito",variant:"contained",children:"Agregar al carrito"})]})};var ge=function(e){var t=e.item,c=Object(n.useContext)(h),a=c.addItem,r=c.getStock,i=Object(n.useState)(!1),o=Object(b.a)(i,2),l=o[0],d=o[1],u=r(t);return Object(s.jsx)(W.a,{style:{marginTop:"5rem",display:"flex",justifyContent:"center"},children:Object(s.jsx)(U.a,{xs:12,sm:8,md:8,lg:6,item:!0,children:Object(s.jsxs)(S.a,{children:[Object(s.jsx)(p.a,{gutterBottom:!0,variant:"h3",children:Object(s.jsx)("div",{className:"text-center title-detail",children:t.name})}),Object(s.jsx)(w.a,{component:"img",height:"194",image:t.img,alt:"img_".concat(t.img)}),Object(s.jsxs)(W.a,{className:"mb-4 mt-4",children:[Object(s.jsx)(p.a,{variant:"body1",color:"text.secondary",children:t.description}),Object(s.jsx)("br",{}),Object(s.jsx)(p.a,{variant:"body1",children:"Precio: $".concat(t.price," ARS")}),u>0?Object(s.jsx)(ve,{stock:u,initial:1,onAdd:function(e){a(t,e),d(!0)}}):Object(s.jsx)("h2",{style:{color:"purple"},children:"Sin stock"}),l&&Object(s.jsx)(j.b,{to:"/cart",style:{textDecoration:"none"},children:Object(s.jsx)(q.a,{style:{width:"165px",background:"#e91e63",color:"white"},variant:"contained",children:"Terminar compra"})})]})]})})})};var ye=function(e){var t=e.match.params.id,c=Object(n.useState)({}),a=Object(b.a)(c,2),r=a[0],i=a[1],o=Object(n.useState)(!0),l=Object(b.a)(o,2),j=l[0],d=l[1];return Object(n.useEffect)((function(){fetch("https://api-dessert-now.herokuapp.com/api/products/".concat(t)).then((function(e){return e.json()})).then((function(e){i(e),d(!1)})).catch((function(e){return console.log(e)}))}),[t]),Object(s.jsx)(G.a,{children:j?Object(s.jsx)(Z.a,{color:"secondary",style:{marginLeft:"50%",marginTop:"10%",color:"#e91e63"}}):Object(s.jsx)(ge,{item:r})})};var ke=function(){return Object(s.jsx)(x,{children:Object(s.jsxs)(j.a,{children:[Object(s.jsx)(C,{}),Object(s.jsxs)(he.c,{children:[Object(s.jsx)(he.a,{path:"/",exact:!0,component:te}),Object(s.jsx)(he.a,{path:"/category/:id",exact:!0,component:te}),Object(s.jsx)(he.a,{path:"/item/:id",exact:!0,component:ye}),Object(s.jsx)(he.a,{path:"/cart",exact:!0,component:ie}),Object(s.jsx)(he.a,{path:"/form",exact:!0,component:xe})]})]})})};c(268);i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(ke,{})}),document.getElementById("root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.8d092d0b.chunk.js.map